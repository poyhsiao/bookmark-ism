# Production Environment Configuration for Task 26
# Docker Swarm Production Deployment

# =============================================================================
# DOMAIN AND URL CONFIGURATION
# =============================================================================
DOMAIN_NAME=bookmark-sync.example.com
SITE_URL=https://bookmark-sync.example.com

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_PASSWORD=your-super-secure-postgres-password-change-this
AUTH_DB_PASSWORD=your-super-secure-auth-db-password-change-this
AUTHENTICATOR_PASSWORD=your-super-secure-authenticator-password-change-this
REALTIME_DB_PASSWORD=your-super-secure-realtime-db-password-change-this

# =============================================================================
# JWT AND AUTHENTICATION CONFIGURATION
# =============================================================================
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long-change-this
JWT_EXPIRY=3600

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_PASSWORD=your-super-secure-redis-password-change-this

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================
SUPABASE_ANON_KEY=your-supabase-anon-key-change-this
ADDITIONAL_REDIRECT_URLS=https://bookmark-sync.example.com/auth/callback,https://bookmark-sync.example.com/auth/success

# =============================================================================
# OAUTH PROVIDERS (OPTIONAL)
# =============================================================================
GITHUB_ENABLED=false
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

GOOGLE_ENABLED=false
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=noreply@example.com
SMTP_PASS=your-smtp-password-change-this
ADMIN_EMAIL=admin@example.com
MAILER_AUTOCONFIRM=false
MAILER_SECURE_EMAIL_CHANGE=true

# =============================================================================
# MINIO STORAGE CONFIGURATION
# =============================================================================
MINIO_ROOT_USER=bookmark-admin
MINIO_ROOT_PASSWORD=your-super-secure-minio-password-change-this
MINIO_BROWSER_REDIRECT_URL=https://bookmark-sync.example.com/storage
MINIO_SERVER_URL=https://bookmark-sync.example.com/storage

# =============================================================================
# SEARCH CONFIGURATION
# =============================================================================
TYPESENSE_API_KEY=your-super-secure-typesense-api-key-change-this

# =============================================================================
# REALTIME CONFIGURATION
# =============================================================================
REALTIME_ENC_KEY=your-super-secure-realtime-encryption-key-change-this
SECRET_KEY_BASE=your-super-secret-key-base-with-at-least-64-characters-long-change-this

# =============================================================================
# DOCKER REGISTRY CONFIGURATION
# =============================================================================
DOCKER_REGISTRY=your-registry.example.com
API_VERSION=latest
WEB_VERSION=latest

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
DISABLE_SIGNUP=false

# =============================================================================
# POSTGREST CONFIGURATION
# =============================================================================
PGRST_DB_SCHEMAS=public
PGRST_DB_ANON_ROLE=anon

# =============================================================================
# SCALING CONFIGURATION
# =============================================================================
API_REPLICAS=5
NGINX_REPLICAS=2
AUTH_REPLICAS=2
REST_REPLICAS=3

# =============================================================================
# CI/CD CONFIGURATION
# =============================================================================
BUILD_NUMBER=
GIT_COMMIT=
GIT_BRANCH=main
GIT_URL=

# Deployment Configuration
AUTO_DEPLOY_PROD=false
AUTO_ROLLBACK=true
PREVIOUS_VERSION=latest

# Notification Configuration
SLACK_WEBHOOK_URL=
EMAIL_NOTIFICATION=devops@example.com

# Environment URLs
STAGING_URL=https://staging.bookmark-sync.example.com
PRODUCTION_URL=https://bookmark-sync.example.com

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================
LOG_LEVEL=info
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=30s

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
GOMAXPROCS=2
GOGC=100
GOMEMLIMIT=1GiB

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_BURST=100

# Circuit Breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_TIMEOUT=60s
CIRCUIT_BREAKER_MAX_REQUESTS=3
CIRCUIT_BREAKER_INTERVAL=10s
CIRCUIT_BREAKER_RATIO=0.6

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem
SSL_CHAIN_PATH=/etc/nginx/ssl/chain.pem

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=bookmark-sync-backups
BACKUP_S3_REGION=us-east-1

# =============================================================================
# RESOURCE LIMITS (for Docker Swarm)
# =============================================================================
# API Service
API_MEMORY_LIMIT=2G
API_CPU_LIMIT=1.0
API_MEMORY_RESERVATION=1G
API_CPU_RESERVATION=0.5

# Database Service
DB_MEMORY_LIMIT=4G
DB_CPU_LIMIT=2.0
DB_MEMORY_RESERVATION=2G
DB_CPU_RESERVATION=1.0

# Redis Service
REDIS_MEMORY_LIMIT=1G
REDIS_CPU_LIMIT=0.5
REDIS_MEMORY_RESERVATION=512M
REDIS_CPU_RESERVATION=0.25

# Nginx Service
NGINX_MEMORY_LIMIT=512M
NGINX_CPU_LIMIT=0.5
NGINX_MEMORY_RESERVATION=256M
NGINX_CPU_RESERVATION=0.25

# =============================================================================
# NODE LABELS (for Docker Swarm placement)
# =============================================================================
# These should be set on your Docker Swarm nodes:
# docker node update --label-add database=true <node-id>
# docker node update --label-add cache=true <node-id>
# docker node update --label-add search=true <node-id>
# docker node update --label-add storage=true <node-id>
# docker node update --label-add zone=zone1 <node-id>

# =============================================================================
# DEVELOPMENT/DEBUG (set to false in production)
# =============================================================================
DEBUG=false
GIN_MODE=release