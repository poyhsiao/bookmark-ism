# Production Environment Configuration
# Bookmark Sync Service - Production Deployment
# Copy this file to .env.production and update with your actual values

# ============================================================================
# DOMAIN AND SSL CONFIGURATION
# ============================================================================
DOMAIN_NAME=bookmark-sync.example.com
SITE_URL=https://bookmark-sync.example.com

# SSL Configuration (for Let's Encrypt)
SSL_EMAIL=admin@example.com
SSL_STAGING=false

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Note: Actual passwords are stored in Docker Swarm secrets
# These are used for non-secret database configuration
AUTH_DB_PASSWORD=your-secure-auth-db-password
AUTHENTICATOR_PASSWORD=your-secure-authenticator-password
REALTIME_DB_PASSWORD=your-secure-realtime-db-password

# Database Connection Settings
DATABASE_MAX_CONNECTIONS=200
DATABASE_POOL_SIZE=50
DATABASE_TIMEOUT=30s

# ============================================================================
# JWT AND AUTHENTICATION CONFIGURATION
# ============================================================================
# Note: JWT_SECRET is stored in Docker Swarm secrets
JWT_EXPIRY=3600
JWT_REFRESH_EXPIRY_HOUR=168

# Supabase Configuration
SUPABASE_ANON_KEY=your-supabase-anon-key
ADDITIONAL_REDIRECT_URLS=https://bookmark-sync.example.com/auth/callback

# ============================================================================
# OAUTH PROVIDERS (OPTIONAL)
# ============================================================================
# GitHub OAuth
GITHUB_ENABLED=false
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# Google OAuth
GOOGLE_ENABLED=false
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# ============================================================================
# EMAIL CONFIGURATION
# ============================================================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=noreply@example.com
SMTP_PASS=your-smtp-password
ADMIN_EMAIL=admin@example.com

# Email Security Settings
MAILER_AUTOCONFIRM=false
MAILER_SECURE_EMAIL_CHANGE=true

# ============================================================================
# STORAGE CONFIGURATION (MINIO)
# ============================================================================
# Note: MINIO_ROOT_PASSWORD is stored in Docker Swarm secrets
MINIO_ROOT_USER=minioadmin
MINIO_BROWSER_REDIRECT_URL=https://bookmark-sync.example.com/storage
MINIO_SERVER_URL=https://bookmark-sync.example.com/storage

# Storage Settings
STORAGE_BUCKET_NAME=bookmarks
STORAGE_REGION=us-east-1
STORAGE_USE_SSL=true

# ============================================================================
# SEARCH CONFIGURATION (TYPESENSE)
# ============================================================================
# Note: TYPESENSE_API_KEY is stored in Docker Swarm secrets
TYPESENSE_ENABLE_CORS=true
TYPESENSE_LOG_LEVEL=INFO

# ============================================================================
# REALTIME CONFIGURATION
# ============================================================================
REALTIME_ENC_KEY=your-secure-realtime-encryption-key-32-chars-min
SECRET_KEY_BASE=your-super-secret-key-base-with-at-least-64-characters-long

# Realtime Performance Settings
REALTIME_MAX_CONNECTIONS=1000
REALTIME_POOL_SIZE=20

# ============================================================================
# DOCKER REGISTRY CONFIGURATION
# ============================================================================
DOCKER_REGISTRY=localhost:5000
API_VERSION=latest
WEB_VERSION=latest

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
DISABLE_SIGNUP=false

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_BURST=100

# Circuit Breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_TIMEOUT=60s
CIRCUIT_BREAKER_MAX_REQUESTS=3
CIRCUIT_BREAKER_INTERVAL=10s
CIRCUIT_BREAKER_RATIO=0.6

# ============================================================================
# POSTGREST CONFIGURATION
# ============================================================================
PGRST_DB_SCHEMAS=public
PGRST_DB_ANON_ROLE=anon

# ============================================================================
# PERFORMANCE AND SCALING CONFIGURATION
# ============================================================================
# Service Replica Counts
API_REPLICAS=5
NGINX_REPLICAS=2
AUTH_REPLICAS=2
REST_REPLICAS=3

# Container Resource Limits
CONTAINER_UID=1000
CONTAINER_GID=1000

# Performance Settings
GOMAXPROCS=2
GOGC=100
GOMEMLIMIT=1GiB

# ============================================================================
# MONITORING AND LOGGING CONFIGURATION
# ============================================================================
LOG_LEVEL=info
LOGGER_FORMAT=json
LOGGER_OUTPUT_PATH=stdout

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30s

# ============================================================================
# CI/CD CONFIGURATION
# ============================================================================
# Build Configuration
BUILD_NUMBER=
GIT_COMMIT=
GIT_BRANCH=main
GIT_URL=

# Deployment Settings
AUTO_DEPLOY_PROD=false
NON_INTERACTIVE=false
AUTO_ROLLBACK=false

# Notification Settings
SLACK_WEBHOOK_URL=
EMAIL_NOTIFICATION=

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=gzip
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM

# ============================================================================
# DEVELOPMENT OVERRIDES (Remove in production)
# ============================================================================
# DEBUG=false
# DEVELOPMENT_MODE=false